# Go Backend Skeleton

Данный репозиторий — это **базовый каркас backend-системы**, на основе которого можно уверенно строить:

- бизнес-логику и доменную модель
- HTTP / WebSocket API
- фоновые задачи и scheduler
- масштабируемую инфраструктуру для production-нагрузок

Проект ориентирован на дальнейшее развитие и использование в реальных бизнес-проектах: сервисах, платформах, 
стартапах и внутренних продуктах.

---

## Идея проекта

Цель репозитория — дать **структурированную, воспроизводимую и удобную среду**, в которой:

- инфраструктура управляется через `Makefile`
- сервисы изолированы и запускаются через Docker Compose
- backend легко расширяется под новые use-cases
- scheduler и API развиваются независимо, но в рамках одной системы
- CI-подобные проверки можно запускать локально

Этот код — **рабочая основа**, рассчитанная на рост и усложнение бизнес-логики.

---

## Быстрый старт

Для полного запуска системы достаточно одной команды:

```bash
make setup up
```

Что произойдет при выполнении команды:

1. Остановка и очистка предыдущего окружения  
2. Пересборка контейнеров без использования Docker-кэша  
3. Запуск всех сервисов через Docker Compose  
4. Применение миграций базы данных  
5. Наполнение базы тестовыми данными (seed)  
6. Запуск статического анализа кода  
7. Выполнение unit-тестов  
8. Корректное завершение процесса и остановка временных контейнеров  

---

## Архитектура системы

Система построена модульно и состоит из независимых сервисов, каждый из которых решает свою задачу:

- **Server** — основной backend-сервис. Содержит бизнес-логику, API и доменную модель  
- **Scheduler** — фоновые задачи, периодические джобы, cron-логика  
- **PostgreSQL** — основное персистентное хранилище  
- **Redis** — кеш, временные состояния, очереди  
- **Centrifugo** — real-time слой и pub/sub  
- **Nginx / Traefik** — reverse-proxy, роутинг и TLS  

Такое разделение позволяет масштабировать и развивать компоненты независимо.

---

## Управление через Makefile

`Makefile` является основной точкой входа для управления системой.  
Он инкапсулирует команды Docker Compose, CI-проверки и прикладные операции.

### Environment

| Команда | Описание |
|------|---------|
| `make setup` | Полная инициализация окружения |
| `make up` | Запуск всех контейнеров |
| `make stop` | Остановка контейнеров |
| `make restart` | Перезапуск окружения |
| `make down` | Полная остановка с удалением volumes |
| `make build` | Пересборка контейнеров без кэша |
| `make logs` | Просмотр логов всех сервисов |

---

### Управление сервисами

Каждый сервис можно запускать, останавливать и логировать отдельно:

```bash
make server
make scheduler
make pgsql
make redis
make nginx
make traefik
make centrifugo
```

---

### Остановка и логи:

```bash
make server.stop
make server.logs
```

Это удобно для локальной разработки, отладки и профилирования.

---

### Работа с приложением

Команды для разработки и контроля качества:

| Команда | Назначение |
|------|------------|
| `make app.shell` | Shell внутри server-контейнера |
| `make app.tidy` | Очистка и проверка зависимостей |
| `make app.test.static` | Статический анализ (golangci-lint) |
| `make app.test.unit` | Unit-тесты |
| `make app.ci` | Полный CI-прогон локально |

---

### Миграции базы данных

Управление схемой и тестовыми данными:

| Команда                  | Назначение                  |
|--------------------------|-----------------------------|
| `make app.migrate.up`    | Применить миграции          |
| `make app.migrate.down`  | Откатить все миграции       |
| `make app.migrate.seed`  | Заполнить тестовыми данными |
| `make app.migrate.fresh` | Полный reset базы данных    |

---

#### Назначение репозитория

Этот репозиторий предназначен как основа для построения backend-платформы и может быть использован для:
-	реализации бизнес-логики любой сложности
-	разработки HTTP / WebSocket API
-	запуска и оркестрации фоновых задач
-	построения масштабируемых сервисов
-	быстрого старта новых продуктов и MVP

Код не навязывает конкретный домен и служит чистым фундаментом для дальнейшего развития.

---
